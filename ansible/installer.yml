---
- name: Install and configure Arch Linux system
  hosts: hosts
  become: true
  vars_files:
    - variables.yml

  tasks:
    # ==================== SYSTEM INITIALIZATION ====================
    - name: Install base system packages and setup yay
      import_tasks: tasks/base.yml
      tags: [init]

    # ==================== HARDWARE & SERVICES ====================
    - name: Setup Services
      tags: [services]
      block:
        - name: Setup WiFi services
          import_tasks: tasks/wifi.yml
        - name: Setup Bluetooth services
          import_tasks: tasks/bluetooth.yml
        - name: Install authentication packages
          import_tasks: tasks/authentication.yml

    - name: Install GPU drivers and packages
      import_tasks: tasks/gpu.yml
      tags: [gpu]

    # ==================== SOFTWARE TOOLS ====================
    - name: Setup Software Tools
      tags: [dev]
      block:
        - name: Install terminal packages and shell configuration
          import_tasks: tasks/terminal.yml
        - name: Install software development packages
          import_tasks: tasks/software_development.yml

    # ==================== DESKTOP ENVIRONMENT ====================
    - name: Install Hyprland and desktop components
      import_tasks: tasks/hyprlandia.yml
      tags: [desktop]

    # ==================== MEDIA & APPLICATIONS ====================
    - name: Install applications
      tags: [apps]
      block:
        - name: Install media applications
          import_tasks: tasks/media.yml
        - name: Install file management applications
          import_tasks: tasks/file_management.yml
        - name: Install browser
          import_tasks: tasks/browser.yml
